{"componentChunkName":"component---src-templates-docs-js","path":"/docs/hooks-overview.html","result":{"data":{"markdownRemark":{"html":"<p><em>Hook</em> æ˜¯ React 16.8 ä¸­å¢åŠ çš„æ–°åŠŸèƒ½ã€‚å®ƒè®“ä½ ä¸å¿…å¯« class å°±èƒ½ä½¿ç”¨ state ä»¥åŠå…¶ä»– React çš„åŠŸèƒ½ã€‚</p>\n<p>Hook <a href=\"/docs/hooks-intro.html#no-breaking-changes\">å‘å¾Œå…¼å®¹</a>ã€‚é€™ä¸€é æä¾› Hook çš„ç°¡ä»‹çµ¦æœ‰ç¶“é©—çš„ React ä½¿ç”¨è€…å€‘ã€‚é€™æ˜¯ä¸€å€‹å¿«ç¯€å¥çš„ç°¡ä»‹ï¼Œå¦‚æœä½ æœ‰ç–‘æƒ‘ï¼Œçœ‹ä¸€ä¸‹é»ƒè‰²æ¡†æ¡†å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>è©³ç´°è§£é‡‹</p>\n<p>é–±è®€ <a href=\"/docs/hooks-intro.html#motivation\">Hook ä»‹ç´¹çš„å‹•æ©Ÿéƒ¨åˆ†</a>ä¾†äº†è§£ç‚ºä»€éº¼æˆ‘å€‘å°‡ Hook åŠ å…¥ Reactã€‚</p>\n</blockquote>\n<p><strong>â†‘â†‘â†‘ æ¯ä¸€å€‹ç« ç¯€çµæŸéƒ½æœ‰ä¸€å€‹é»ƒè‰²æ¡†æ¡†åƒé€™æ¨£ã€‚</strong> ä»–å€‘é€£åˆ°è©³ç´°è§£é‡‹ã€‚</p>\n<h2 id=\"state-hook\"><a href=\"#state-hook\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ“Œ State Hook </h2>\n<p>é€™å€‹ç¯„ä¾‹ render ä¸€å€‹è¨ˆæ•¸å™¨ã€‚ç•¶ä½ æŒ‰ä¸‹æŒ‰éˆ•ï¼Œä»–æœƒå¢åŠ æ•¸å€¼ï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// å®£å‘Šä¸€å€‹æ–°çš„ state è®Šæ•¸ï¼Œæˆ‘å€‘å«ä»–ã€Œcountã€</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™è£¡ï¼ŒuseState æ˜¯ä¸€å€‹ <em>Hook</em> ï¼ˆæˆ‘å€‘é¦¬ä¸ŠæœƒèŠåˆ°ä»–æ˜¯ä»€éº¼æ„æ€ï¼‰ã€‚æˆ‘å€‘åœ¨ function component ä¸­å‘¼å«ä»–å€‘ç”¨ä¾†åŠ å…¥ä¸€äº› local stateã€‚React æœƒåœ¨é‡æ–° render çš„é é¢ä¹‹é–“ä¿ç•™é€™äº› stateã€‚<code class=\"gatsby-code-text\">useState</code> å›å‚³ä¸€çµ„æ•¸å€¼ï¼š<em>ç›®å‰</em> state æ•¸å€¼å’Œä¸€å€‹å¯ä»¥è®“ä½ æ›´æ–° state çš„ functionã€‚ä½ å¯ä»¥å¾ event handler æˆ–å…¶ä»–åœ°æ–¹å‘¼å«é€™å€‹ function ä¾†æ›´æ–°ä»–ã€‚å¾ˆé¡ä¼¼ <code class=\"gatsby-code-text\">this.setState</code> åœ¨ class ç•¶ä¸­çš„ç”¨æ³•ï¼Œé™¤äº†ä»–ä¸æœƒå°‡èˆŠçš„èˆ‡æ–°çš„ state åˆä½µåœ¨ä¸€èµ·ã€‚ï¼ˆæˆ‘å€‘å°‡æœƒåœ¨<a href=\"/docs/hooks-state.html\">ä½¿ç”¨ State Hook</a> ä¸­ç¤ºç¯„ä¸€å€‹ç¯„ä¾‹æ¯”è¼ƒ <code class=\"gatsby-code-text\">useState</code> èˆ‡ <code class=\"gatsby-code-text\">this.state</code>ã€‚ï¼‰</p>\n<p><code class=\"gatsby-code-text\">useState</code> å”¯ä¸€çš„ argument æ˜¯åˆå§‹ç‹€æ…‹ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä»–æ˜¯ <code class=\"gatsby-code-text\">0</code> å› ç‚ºæˆ‘å€‘çš„è¨ˆæ•¸å™¨å¾é›¶é–‹å§‹ã€‚æ³¨æ„ä¸åƒ <code class=\"gatsby-code-text\">this.state</code>ï¼Œstate åœ¨é€™è£¡ä¸éœ€è¦ä¸€å®šæ˜¯ objectï¼Œé›–ç„¶ä½ è¦ä¹Ÿå¯ä»¥ã€‚åˆå§‹ç‹€æ…‹ argument åªæœ‰åœ¨ç¬¬ä¸€æ¬¡ render çš„æ™‚å€™æœƒè¢«ç”¨åˆ°ã€‚</p>\n<h4 id=\"declaring-multiple-state-variables\"><a href=\"#declaring-multiple-state-variables\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å®£å‘Šå¤šå€‹ state è®Šæ•¸ </h4>\n<p>ä½ å¯ä»¥åœ¨ä¸€å€‹ component ä¸­ä½¿ç”¨ State Hook ä¸åªä¸€æ¬¡ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ExampleWithManyStates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// å®£å‘Šå¤šå€‹ state è®Šæ•¸!</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>age<span class=\"token punctuation\">,</span> setAge<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fruit<span class=\"token punctuation\">,</span> setFruit<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> setTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> text<span class=\"token operator\">:</span> <span class=\"token string\">'Learn Hooks'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Array_destructuring\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">é™£åˆ—è§£æ§‹è³¦å€¼</a>èªæ³•è®“æˆ‘å€‘å¯ä»¥çµ¦ç”¨å‘¼å« <code class=\"gatsby-code-text\">useState</code> å®£å‘Šçš„ state è®Šæ•¸ä¸åŒçš„åå­—ï¼Œé€™äº›åå­—ä¸æ˜¯ <code class=\"gatsby-code-text\">useState</code> API çš„ä¸€éƒ¨ä»½ã€‚ç›¸ååœ°ï¼ŒReact å‡è¨­å¦‚æœä½ å‘¼å« <code class=\"gatsby-code-text\">useState</code> å¤šæ¬¡ï¼Œä½ åœ¨æ¯æ¬¡ render ç”¨åŒæ¨£çš„é †åºã€‚æˆ‘å€‘ä¹‹å¾Œå°‡æœƒå›ä¾†è¨è«–ç‚ºä»€éº¼å¯ä»¥é€™æ¨£åšèˆ‡ä»€éº¼æ™‚å€™ä»–å¾ˆæœ‰ç”¨ã€‚</p>\n<h4 id=\"but-what-is-a-hook\"><a href=\"#but-what-is-a-hook\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ä½†æ˜¯ä»€éº¼æ˜¯ Hook? </h4>\n<p>Hook æ˜¯ functionï¼Œä»–è®“ä½ å¯ä»¥å¾ function componentã€Œhook intoã€React state èˆ‡ç”Ÿå‘½é€±æœŸåŠŸèƒ½ã€‚Hook åœ¨ class è£¡é¢æ²’æœ‰è¾¦æ³•ç”¨â€”â€”ä»–å€‘è®“ä½ ä¸ç”¨ class å°±èƒ½ä½¿ç”¨ Reactã€‚ï¼ˆæˆ‘å€‘<a href=\"/docs/hooks-intro.html#gradual-adoption-strategy\">ä¸å»ºè­°</a>ä½ é€šå®µé‡å¯«ç¾å­˜çš„ component ä½†æ˜¯å¦‚æœä½ æƒ³è¦çš„è©±ï¼Œä½ å¯ä»¥é–‹å§‹åœ¨æ–°çš„ component ç•¶ä¸­ä½¿ç”¨ã€‚ï¼‰</p>\n<p>React æä¾›ä¸€äº›å…§å»º Hook åƒæ˜¯ <code class=\"gatsby-code-text\">useState</code>ã€‚ä½ ä¹Ÿå¯ä»¥æ‰“é€ ä½ è‡ªå·±çš„ Hook ç”¨ä¾†åœ¨ä¸åŒçš„ component ä¹‹é–“é‡è¤‡ä½¿ç”¨ stateful é‚è¼¯ã€‚æˆ‘å€‘å…ˆä¾†çœ‹çœ‹å…§å»º Hookã€‚</p>\n<blockquote>\n<p>è©³ç´°è§£é‡‹</p>\n<p>ä½ å¯ä»¥åœ¨<a href=\"/docs/hooks-state.html\">ä½¿ç”¨ State Hook</a> äº†è§£æ›´å¤š State Hookã€‚</p>\n</blockquote>\n<h2 id=\"effect-hook\"><a href=\"#effect-hook\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âš¡ï¸ Effect Hook </h2>\n<p>ä½ å¾å‰å¯èƒ½åœ¨ React component åšé fetch è³‡æ–™ã€è¨‚é–±ã€æˆ–æ‰‹å‹•æ”¹è®Š DOMã€‚æˆ‘å€‘ç¨±é€™äº›æ“ä½œã€Œside effectã€ï¼ˆæˆ–ç°¡ç¨± effectï¼‰å› ç‚ºä»–å€‘å¯ä»¥å½±éŸ¿å…¶ä»– component ä¸”åœ¨ render æœŸé–“ç„¡æ³•å®Œæˆã€‚</p>\n<p>Effect Hook <code class=\"gatsby-code-text\">useEffect</code> åœ¨ function component ä¸­åŠ å…¥é‹ä½œ side effect çš„èƒ½åŠ›ã€‚ä»–å’Œ <code class=\"gatsby-code-text\">componentDidMount</code>ï¼Œ<code class=\"gatsby-code-text\">componentDidUpdate</code>ï¼Œèˆ‡ <code class=\"gatsby-code-text\">componentWillUnmount</code> æœ‰è‘—åŒæ¨£çš„å®—æ—¨ï¼Œä½†æ•´åˆé€²ä¸€å€‹å–®ä¸€çš„ APIã€‚ï¼ˆæˆ‘å€‘å°‡åœ¨<a href=\"/docs/hooks-effect.html\">ä½¿ç”¨ Effect Hook</a> ä¸­ç”¨ç¯„ä¾‹æ¯”è¼ƒ <code class=\"gatsby-code-text\">useEffect</code> å’Œé€™äº›æ–¹æ³•ã€‚ï¼‰</p>\n<p>èˆ‰ä¾‹ä¾†èªªï¼Œé€™å€‹ component åœ¨ React æ›´æ–° DOM ä¹‹å¾Œè¨­å®šæ–‡ä»¶æ¨™é¡Œï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// èˆ‡ componentDidMount å’Œ componentDidUpdate é¡ä¼¼ï¼š</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// ä½¿ç”¨ç€è¦½å™¨ API æ›´æ–°æ–‡ä»¶æ¨™é¡Œ</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        Click me</span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ç•¶ä½ å‘¼å« <code class=\"gatsby-code-text\">useEffect</code> æ™‚ï¼Œä½ å‘Šè¨´ React åˆ·æ–° DOM è®Šå‹•ä¹‹å¾ŒåŸ·è¡Œä½ çš„ ã€Œeffectã€ã€‚Effect åœ¨ component è£¡é¢è¢«å®£å‘Šæ‰€ä»¥ä»–å€‘æœ‰æ¬Šé™è¨ªå•ä»–çš„ props å’Œ stateã€‚é è¨­ä¹‹ä¸‹ï¼ŒReact åœ¨æ¯ä¸€æ¬¡ render ä¹‹å¾ŒåŸ·è¡Œ effect â€”â€” <em>åŒ…æ‹¬</em>ç¬¬ä¸€æ¬¡ renderã€‚ï¼ˆæˆ‘å€‘æœƒåœ¨<a href=\"/docs/hooks-effect.html\">ä½¿ç”¨ Effect Hook</a> åšæ›´å¤šä»–å’Œ class lifecycle çš„æ¯”è¼ƒã€‚ï¼‰</p>\n<p>Effect å¯ä»¥é€éå›å‚³ä¸€å€‹ function é¸æ“‡æ€§çš„å®šç¾©å¦‚ä½•ã€Œæ¸…ç†ã€ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œé€™å€‹ component ä½¿ç”¨ effect ä¾†è¨‚é–±æœ‹å‹çš„ä¸Šç·šç‹€æ…‹ï¼Œä¸¦åœ¨å–æ¶ˆè¨‚é–±ä¹‹å¾Œæ¸…ç†ã€‚</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œç•¶ component unmount å’Œé‡æ–°é‹è¡Œ effect çš„æ™‚å€™ï¼ŒReact æœƒå–æ¶ˆè¨‚é–±æˆ‘å€‘çš„ <code class=\"gatsby-code-text\">ChatAPI</code> å› ç‚ºä¸€é€£ä¸²ä¾åºçš„ renderã€‚ï¼ˆå¦‚æœä½ æƒ³çš„è©±ï¼Œå¦‚æœæˆ‘å€‘å‚³éçµ¦ <code class=\"gatsby-code-text\">ChatAPI</code> çš„ <code class=\"gatsby-code-text\">props.friend.id</code> æ²’æœ‰æ”¹è®Šï¼Œæœ‰è¾¦æ³•<a href=\"/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects\">å‘Šè¨´ React è·³éé‡æ–°è¨‚é–±</a>ã€‚ï¼‰</p>\n<p>å°±åƒæ˜¯ <code class=\"gatsby-code-text\">useState</code> ä¸€æ¨£ï¼Œä½ å¯ä»¥åœ¨ä¸€å€‹ component ä¸­ä½¿ç”¨è¶…éä¸€å€‹ effectï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatusWithCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>Hook è®“ä½ åœ¨ component ä¸­é€éå½¼æ­¤ç›¸é—œçš„éƒ¨åˆ†çµ„ç¹” side effectï¼ˆåƒæ˜¯åŠ å…¥æˆ–ç§»é™¤è¨‚é–±ï¼‰ï¼Œè€Œä¸æ˜¯å¼·è¿«æ ¹æ“šç”Ÿå‘½é€±æœŸæ–¹æ³•åˆ†æ•£å„è™•ã€‚</p>\n<blockquote>\n<p>è©³ç´°è§£é‡‹</p>\n<p>ä½ å¯ä»¥åœ¨<a href=\"/docs/hooks-effect.html\">ä½¿ç”¨ Effect Hook</a> äº†è§£æ›´å¤š Effect Hookã€‚</p>\n</blockquote>\n<h2 id=\"rules-of-hooks\"><a href=\"#rules-of-hooks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœŒï¸ Hook çš„è¦å‰‡ </h2>\n<p>Hook æ˜¯ JavaScript functionï¼Œä½†æ˜¯ä»–å€‘å¼·åŠ äº†å…©æ¢é¡å¤–çš„è¦å‰‡ï¼š</p>\n<ul>\n<li>åªåœ¨<strong>æœ€ä¸Šå±¤</strong>å‘¼å« Hookã€‚ä¸è¦åœ¨è¿´åœˆã€åˆ¤æ–·å¼ã€æˆ–æ˜¯åµŒå¥— function ä¸­å‘¼å« Hookã€‚</li>\n<li>åªåœ¨ <strong>React function component</strong> å‘¼å« Hookã€‚ä¸è¦åœ¨ä¸€èˆ¬ JavaScript function ä¸­å‘¼å« Hookã€‚ï¼ˆåªæœ‰ä¸€å€‹å…¶ä»–æœ‰æ•ˆçš„åœ°æ–¹å¯ä»¥å‘¼å« Hookâ€”â€”ä½ è‡ªå·±çš„å®¢è£½åŒ– Hookã€‚æˆ‘å€‘é¦¬ä¸Šæœƒå­¸åˆ°ä»–å€‘ã€‚ï¼‰</li>\n</ul>\n<p>æˆ‘å€‘æä¾›äº†ä¸€å€‹ <a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">linter plugin</a> è‡ªå‹•å¼·åˆ¶å¥—ç”¨é€™äº›è¦å‰‡ã€‚æˆ‘å€‘äº†è§£é€™äº›è¦å‰‡ç¬¬ä¸€çœ¼çœ‹èµ·ä¾†å¾ˆå¤šé™åˆ¶æˆ–æ˜¯å¾ˆè®“äººç–‘æƒ‘ï¼Œä½†æ˜¯ä»–å€‘æ˜¯è®“ Hook æˆåŠŸé‹ä½œçš„å¿…è¦æ¢ä»¶ã€‚</p>\n<blockquote>\n<p>è©³ç´°è§£é‡‹</p>\n<p>ä½ å¯ä»¥åœ¨ <a href=\"/docs/hooks-rules.html\">Hook çš„è¦å‰‡</a>äº†è§£æ›´å¤š Hook çš„è¦å‰‡ã€‚</p>\n</blockquote>\n<h2 id=\"building-your-own-hooks\"><a href=\"#building-your-own-hooks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ’¡ æ‰“é€ ä½ è‡ªå·±çš„ Hook </h2>\n<p>æœ‰æ™‚å€™ï¼Œæˆ‘å€‘æƒ³è¦åœ¨ component ä¹‹é–“é‡è¤‡ä½¿ç”¨æŸäº› stateful é‚è¼¯ã€‚å‚³çµ±ä¸Šï¼Œé€™å€‹å•é¡Œæœ‰å…©ç¨®ç†±é–€çš„ç­”æ¡ˆï¼š<a href=\"/docs/higher-order-components.html\">higher-order components</a> èˆ‡ <a href=\"/docs/render-props.html\">render props</a>ã€‚å®¢è£½åŒ– Hook è®“ä½ ä¸ç”¨åœ¨ä½ çš„ tree ä¸­åŠ å…¥æ›´å¤š component å°±èƒ½åšåˆ°ã€‚</p>\n<p>åœ¨é€™ä¸€é å‰é¢ï¼Œæˆ‘å€‘æåˆ° <code class=\"gatsby-code-text\">FriendStatus</code> component å‘¼å« <code class=\"gatsby-code-text\">useState</code> èˆ‡ <code class=\"gatsby-code-text\">useEffect</code> Hook ä¾†è¨‚é–±æœ‹å‹çš„ç·šä¸Šç‹€æ…‹ã€‚å‡å¦‚æˆ‘å€‘ä¹Ÿæƒ³è¦åœ¨å¦ä¸€å€‹ component é‡è¤‡ä½¿ç”¨é€™å€‹è¨‚é–±é‚è¼¯ã€‚</p>\n<p>é¦–å…ˆï¼Œæˆ‘å€‘æŠ½é›¢é€™å€‹é‚è¼¯åˆ°å®¢è£½åŒ– Hook <code class=\"gatsby-code-text\">useFriendState</code> ä¹‹ä¸­ï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">friendID</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>friendID<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>friendID<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> isOnline<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ä»–æ¥æ”¶ <code class=\"gatsby-code-text\">friendID</code> åšç‚º argument ä¸”å›å‚³æˆ‘å€‘çš„æœ‹å‹æ˜¯å¦åœ¨ç·šä¸Šã€‚</p>\n<p>ç¾åœ¨æˆ‘å€‘åœ¨å…©å€‹ component ä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isOnline <span class=\"token operator\">=</span> <span class=\"token function\">useFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'green'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'black'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é€™å…©å€‹ component çš„ state æ˜¯å®Œå…¨ç¨ç«‹çš„ã€‚Hook æ˜¯ä¸€ç¨®é‡è¤‡ä½¿ç”¨ <em>stateful é‚è¼¯</em>çš„æ–¹å¼ï¼Œä¸æ˜¯ state æœ¬èº«ã€‚å¯¦éš›ä¸Šï¼Œæ¯ä¸€æ¬¡å‘¼å«ä¸€å€‹ Hook éƒ½æœ‰ä¸€å€‹å®Œå…¨ç¨ç«‹ä¸”éš”é›¢çš„ state â€”â€” æ‰€ä»¥ä½ ç”šè‡³å¯ä»¥åœ¨ä¸€å€‹ component ä½¿ç”¨åŒä¸€å€‹å®¢è£½åŒ– Hook å…©æ¬¡ã€‚</p>\n<p>å®¢è£½åŒ– Hook æ¯”è¼ƒåƒæ…£ä¾‹è€Œä¸æ˜¯åŠŸèƒ½ï¼Œå¦‚æœä¸€å€‹ function çš„åå­—æ˜¯ã€Œ<code class=\"gatsby-code-text\">use</code>ã€é–‹é ­ä¸”ä»–å‘¼å«å…¶ä»– Hookï¼Œæˆ‘å€‘å°‡ä»–ç¨±ä¹‹ç‚ºå®¢è£½åŒ– Hookã€‚ä½¿ç”¨ Hook æ™‚ï¼Œ<code class=\"gatsby-code-text\">useSomething</code>çš„å‘½åæ…£ä¾‹æ˜¯æˆ‘å€‘çš„ linter plugin å¦‚ä½•èƒ½å¤ åœ¨ç¨‹å¼ç¢¼ä¸­æ‰¾åˆ° bug çš„åŸå› ã€‚</p>\n<p>ä½ å¯ä»¥å¯«å®¢è£½åŒ– Hook æ¶µè“‹å»£æ³›åœ°ä½¿ç”¨æ¡ˆä¾‹åƒæ˜¯è¡¨å–®è™•ç†ã€å‹•ç•«ã€å®£å‘Šå¼è¨‚é–±ã€è¨ˆæ™‚å™¨å’Œè¨±å¤šæˆ‘å€‘å¯èƒ½æ²’æœ‰æƒ³åˆ°çš„ã€‚æˆ‘å€‘å¾ˆèˆˆå¥®çœ‹åˆ° React ç¤¾ç¾¤æœƒæƒ³åˆ°ä»€éº¼æ¨£çš„ Hookã€‚</p>\n<blockquote>\n<p>è©³ç´°è§£é‡‹</p>\n<p>ä½ å¯ä»¥åœ¨<a href=\"/docs/hooks-custom.html\">æ‰“é€ ä½ è‡ªå·±çš„ Hook</a> äº†è§£æ›´å¤šå®¢è£½åŒ– Hookã€‚</p>\n</blockquote>\n<h2 id=\"other-hooks\"><a href=\"#other-hooks\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ”Œ å…¶ä»– Hook </h2>\n<p>é‚„æœ‰ä¸€äº›æ¯”è¼ƒå°‘ç”¨çš„å…§å»º Hook ä½ å¯èƒ½æœƒè¦ºå¾—å¾ˆæœ‰ç”¨ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œ<a href=\"/docs/hooks-reference.html#usecontext\"><code class=\"gatsby-code-text\">useContext</code></a> è®“ä½ ä¸éœ€è¦å·¢ç‹€åŒ–å°±å¯ä»¥è¨‚é–± React contextï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> locale <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>LocaleContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ThemeContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"/docs/hooks-reference.html#usereducer\"><code class=\"gatsby-code-text\">useReducer</code></a> è®“ä½ åœ¨è¤‡é›œçš„ component ä¸­ç”¨ reducer ç®¡ç† local stateï¼š</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Todos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>todosReducer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token comment\">// ...</span></code></pre></div>\n<blockquote>\n<p>è©³ç´°è§£é‡‹</p>\n<p>ä½ å¯ä»¥åœ¨ <a href=\"/docs/hooks-reference.html\">Hook API åƒè€ƒ</a>äº†è§£æ›´å¤šæ‰€æœ‰çš„å…§å»º Hookã€‚</p>\n</blockquote>\n<h2 id=\"next-steps\"><a href=\"#next-steps\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ä¸‹ä¸€æ­¥ </h2>\n<p>å‘¼ï¼è¬›å¾ˆå¿«ï¼å¦‚æœæœ‰ä»€éº¼è®“ä½ è¦ºå¾—æ²’é“ç†æˆ–æ˜¯ä½ æƒ³äº†è§£æ›´å¤šç´°ç¯€ï¼Œä½ å¯ä»¥é–±è®€ä¸‹ä¸€é ï¼Œå¾ <a href=\"/docs/hooks-state.html\">State Hook</a> æ–‡ä»¶é–‹å§‹ã€‚</p>\n<p>ä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ <a href=\"/docs/hooks-reference.html\">Hook API reference</a> èˆ‡ <a href=\"/docs/hooks-faq.html\">Hook å¸¸è¦‹å•é¡Œ</a>ã€‚</p>\n<p>æœ€å¾Œï¼Œä¸è¦æ¼äº† <a href=\"/docs/hooks-intro.html\">Hook ä»‹ç´¹é é¢</a>ï¼Œé€™è£¡è§£é‡‹äº†<em>ç‚ºä»€éº¼</em>æˆ‘å€‘åŠ å…¥äº† Hook èˆ‡æˆ‘å€‘å¦‚ä½•å’Œ class ä¸€èµ·ä½¿ç”¨â€”â€”ä¸ç”¨é‡å¯«æˆ‘å€‘çš„æ‡‰ç”¨ç¨‹å¼ã€‚</p>","frontmatter":{"title":"Hook æ¦‚è§€","next":"hooks-state.html","prev":"hooks-intro.html"},"fields":{"path":"content/docs/hooks-overview.md","slug":"docs/hooks-overview.html"}}},"pageContext":{"slug":"docs/hooks-overview.html"}},"staticQueryHashes":[]}